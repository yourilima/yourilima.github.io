Â´<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map follower</title>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log('Service Worker registered'))
                .catch(error => console.log('Service Worker registration failed:', error));
        }
    </script>

  <script>
        function showPosition(position, ctx) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            // Draw a dot on the canvas, 
                const dotY = (56.045857616798834-latitude)*1200000; // X coordinate of the dot
                const dotX = (longitude-8.115638562938113)*1200000; // Y coordinate of the dot
            document.getElementById("debug").innerHTML = dotX + " - " + dotY + " radius: " + position.coords.accuracy;
            console.log(dotX,dotY);
                const dotRadius = position.coords.accuracy; // Radius of the dot
                ctx.clearRect(0, 0, canvas.width, canvas.height);    
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                ctx.beginPath();
                ctx.arc(dotX, dotY, dotRadius, 0, Math.PI * 2, true);
                ctx.fillStyle = 'blue'; // Color of the dot
                ctx.fill();
                ctx.closePath();
            ctx.beginPath();
                ctx.arc(dotX, dotY, 5, 0, Math.PI * 2, true);
                ctx.fillStyle = 'red'; // Color of the dot
                ctx.fill();
                ctx.closePath();
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    alert("User denied the request for Geolocation.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("Location information is unavailable.");
                    break;
                case error.TIMEOUT:
                    alert("The request to get user location timed out.");
                    break;
                case error.UNKNOWN_ERROR:
                    alert("An unknown error occurred.");
                    break;
            }
            console.log(error);
        }
    </script>
  <script>
        window.onload = function() {
            const canvas = document.getElementById('drawing');
            const ctx = canvas.getContext('2d');
            
const img = new Image();
            img.src = 'https://glennovits.github.io/occ-oversigt.png'; // Replace with the path to your image
       
            // Load the image
            

            img.onload = function() {
                // Draw the image on the canvas
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                
            };
            function getPos(){
                if (navigator.geolocation) {
                    const watchId = navigator.geolocation.watchPosition(function (position) {
                        showPosition(position, ctx)
                    }, showError, {
                        enableHighAccuracy: true,
                        maximumAge: 0,
                        timeout: 500000
                    });
                } else {
                    console.log("Geolocation is not supported by this browser.");
                }
            }
            getPos();
            
            canvas.style.transform = `rotate(${20}deg)`;
        };
    </script>
</head>
<body>
    <h1 id="debug"></h1>
  <canvas id="drawing" width="1598" height="1764">
  </canvas>
</body>
</html>
