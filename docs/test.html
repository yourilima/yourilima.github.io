<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal PWA</title>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log('Service Worker registered'))
                .catch(error => console.log('Service Worker registration failed:', error));
        }
    </script>

  <script>
       

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    document.getElementById("coordinates").innerHTML = "User denied the request for Geolocation.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    document.getElementById("coordinates").innerHTML = "Location information is unavailable.";
                    break;
                case error.TIMEOUT:
                    document.getElementById("coordinates").innerHTML = "The request to get user location timed out.";
                    break;
                case error.UNKNOWN_ERROR:
                    document.getElementById("coordinates").innerHTML = "An unknown error occurred.";
                    break;
            }
        }
    </script>
  <script>
        window.onload = function() {
            const canvas = document.getElementById('drawing');
            const ctx = canvas.getContext('2d');
            

        function showPosition(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            console.log(latitude);
            console.log(longitude);
            // Draw a dot on the canvas, 
                const dotY = (56.045857616798834-latitude)*1200000; // X coordinate of the dot
                const dotX = (longitude-8.115638562938113)*1200000; // Y coordinate of the dot
            document.getElementById("debug").innerHTML = dotX + " - " + dotY;
            console.log(dotX,dotY);
                const dotRadius = 5; // Radius of the dot

                ctx.beginPath();
                ctx.arc(dotX, dotY, dotRadius, 0, Math.PI * 2, true);
                ctx.fillStyle = 'red'; // Color of the dot
                ctx.fill();
                ctx.closePath();
        }
            // Load the image
            const img = new Image();
            img.src = 'https://glennovits.github.io/occ-oversigt.png'; // Replace with the path to your image

            img.onload = function() {
                // Draw the image on the canvas
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                
            };
            function getPos(){
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition, showError);
                } else {
                    console.log("Geolocation is not supported by this browser.");
                }
            }
            setInterval(getPos, 1000);
        };
    </script>
</head>
<body>
    <h1 id="debug"></h1>
  <canvas id="drawing" width="1598" height="1764">
  </canvas>
</body>
</html>
